<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سایت‌ها</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-r from-blue-900 to-blue-500 text-white">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-4">سایت‌ها</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {% for site in sites %}
                <div class="bg-blue-800 p-4 rounded-lg card cursor-pointer" onclick="alert('نام: {{ site[1] }}\nتوضیحات: {{ site[2] }}\nلینک: {{ site[3] }}')">
                    <img src="{{ site[4] }}" alt="{{ site[1] }}" class="w-full h-48 object-cover rounded">
                    <h2 class="text-xl font-bold mt-2">{{ site[1] }}</h2>
                    <p>{{ site[2] | truncate(50) }}</p>
                    <button onclick="likeSite({{ site[0] }})" class="bg-blue-600 text-white px-4 py-2 rounded mt-2">لایک (<span id="likes-{{ site[0] }}">{{ site[5] }}</span>)</button>
                </div>
            {% endfor %}
        </div>
    </div>
    <script>
        async function likeSite(siteId) {
            const response = await fetch(`/like/${siteId}`, { method: 'POST' });
            const result = await response.json();
            if (result.success) {
                document.getElementById(`likes-${siteId}`).textContent = result.likes;
            }
        }
    </script>
</body>
</html>
